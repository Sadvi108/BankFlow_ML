{
  "meta": {
    "project": "BankFlow-ML",
    "date": "2026-02-03",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "BankFlow-ML is an AI-driven financial data processing web application that leverages machine learning to automate extraction, classification, prediction, and reporting of banking transaction data. It offers a web interface and REST APIs for uploading financial documents and receiving real-time analysis and predictive insights to reduce manual tasks and accelerate decision-making.",
  "core_goals": [
    "Automate extraction and classification of banking transaction data from uploaded receipts and financial documents.",
    "Provide predictive insights such as credit risk, churn prediction, and anomaly detection using ML models.",
    "Offer a user-friendly web UI for easy file upload, parameter selection, and result visualization.",
    "Serve a comprehensive REST API to support uploading, prediction, extraction, and retrieval of processing history.",
    "Ensure security and compliance through HTTPS, authentication tokens, and input validation."
  ],
  "key_features": [
    "Extract Receipt API for uploading receipt images/PDFs and extracting key transaction details (bank, amount, date, transaction ID).",
    "Get History API to retrieve past processed receipt data for user review and audit.",
    "Health Check API to monitor the availability and operational status of the service.",
    "Machine Learning Inference supporting predictions like credit risk and transaction classification based on uploaded financial data (CSV, JSON, PDF).",
    "User-friendly frontend for uploading files, selecting model parameters or thresholds, and displaying prediction results.",
    "Support for multiple ML model versions (baseline, optimized, custom) for reproducibility and flexibility.",
    "Security features including API key/token authentication, HTTPS encryption, and data input validation to protect sensitive financial data."
  ],
  "user_flow_summary": [
    "User accesses the web UI or API endpoint to upload a receipt or financial document (image/PDF/CSV/JSON).",
    "The system processes the uploaded file, extracting transaction details or running ML inference models to generate predictions.",
    "The extracted data or prediction results are returned to the user via UI or API response.",
    "Users can query the history API to retrieve previously processed receipt extraction data.",
    "Health check endpoint supports operational monitoring of the application availability."
  ],
  "validation_criteria": [
    "Accuracy of transaction detail extraction from various formats (image, PDF) in the Extract Receipt API.",
    "Response correctness and completeness in ML prediction results for financial datasets.",
    "User interface usability tested for file upload, parameter selection, and results display.",
    "API endpoints compliant with OpenAPI specifications and return proper HTTP codes and error handling.",
    "Security measures validated for authentication, HTTPS enforcement, and input sanitization.",
    "System uptime and health verified through health check endpoint responses."
  ],
  "code_summary": {
    "tech_stack": [
      "Python",
      "FastAPI",
      "Supabase",
      "OpenCV",
      "Jinja2"
    ],
    "features": [
      {
        "name": "Extract Receipt API",
        "description": "Main endpoint to upload a receipt (image/PDF) and extract transaction details like bank, amount, date, and reference ID.",
        "files": [
          "simple_server.py",
          "app/ultimate_patterns_v3.py",
          "app/layout_aware_extractor.py",
          "app/enhanced_ocr_pipeline.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Bank Receipt Extractor",
            "version": "1.0.0"
          },
          "paths": {
            "/extract": {
              "post": {
                "summary": "Extract transaction details from uploaded receipt",
                "requestBody": {
                  "required": true,
                  "content": {
                    "multipart/form-data": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "file": {
                            "type": "string",
                            "format": "binary",
                            "description": "The receipt image or PDF"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Extraction successful",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "data": {
                              "type": "object",
                              "properties": {
                                "bank": {
                                  "type": "string"
                                },
                                "transaction_id": {
                                  "type": "string"
                                },
                                "amount": {
                                  "type": "string"
                                },
                                "date": {
                                  "type": "string"
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Get History API",
        "description": "Retrieve the history of processed receipts.",
        "files": [
          "simple_server.py",
          "app/history_manager.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/history": {
              "get": {
                "summary": "Get extraction history",
                "responses": {
                  "200": {
                    "description": "History list",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "history": {
                              "type": "array"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Health Check API",
        "description": "Simple health check endpoint.",
        "files": [
          "simple_server.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/health": {
              "get": {
                "summary": "Health check",
                "responses": {
                  "200": {
                    "description": "Service is healthy",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    ]
  }
}
